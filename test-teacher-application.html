<!DOCTYPE html>
<html>
<head>
    <title>Test Teacher Application</title>
</head>
<body>
    <h1>Test Teacher Application Submission</h1>
    
    <script>
        // Test data - similar to what the frontend would send
        const testData = {
            personalDetails: {
                fullName: "Test Teacher",
                email: "test@teacher.com",
                phone: "1234567890",
                dateOfBirth: "1990-01-01",
                address: {
                    street: "123 Test St",
                    city: "Test City",
                    state: "Test State",
                    zipCode: "12345",
                    country: "Test Country"
                }
            },
            qualifications: {
                highestDegree: "Master's",
                fieldOfStudy: "Computer Science",
                university: "Test University",
                graduationYear: 2015,
                gpa: 3.8
            },
            experience: {
                yearsOfExperience: 5,
                previousPositions: [{
                    title: "Software Developer",
                    institution: "Tech Company",
                    duration: "2018-2023",
                    description: "Developed applications"
                }],
                teachingExperience: "I have taught coding bootcamps for 2 years"
            },
            specializations: [{
                subject: "JavaScript",
                proficiencyLevel: "expert",
                yearsOfExperience: 5
            }],
            motivation: {
                whyTeach: "I love sharing knowledge",
                goals: "Help students learn programming",
                contribution: "Bring real-world experience to education"
            },
            portfolioLinks: []
        };

        // Test function
        async function testSubmission() {
            try {
                const formData = new FormData();
                
                // Add application data
                Object.keys(testData).forEach(key => {
                    if (typeof testData[key] === 'object' && testData[key] !== null) {
                        formData.append(key, JSON.stringify(testData[key]));
                    } else {
                        formData.append(key, testData[key]);
                    }
                });

                // Create dummy files
                const dummyFile = new Blob(['dummy content'], { type: 'application/pdf' });
                formData.append('resume', dummyFile, 'resume.pdf');
                formData.append('identityDocument', dummyFile, 'id.pdf');

                console.log('Sending request...');
                
                const response = await fetch('http://localhost:5001/api/teacher-applications/apply', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        // Note: Content-Type is omitted for FormData, browser sets it automatically
                        'Authorization': 'Bearer YOUR_TOKEN_HERE' // You'll need a real token
                    }
                });

                const result = await response.text();
                console.log('Response status:', response.status);
                console.log('Response:', result);
                
                if (!response.ok) {
                    console.error('Error:', result);
                } else {
                    console.log('Success:', result);
                }
                
            } catch (error) {
                console.error('Request failed:', error);
            }
        }

        // Uncomment to run the test
        // testSubmission();
        
        console.log('Test data structure:', testData);
    </script>
</body>
</html>
